-- Reset existing data
DELETE FROM "MOMOAPI"."ROLE_PERMISSION_PROGRAM";
DELETE FROM "MOMOAPI"."ACCOUNT_PERMISSION_PROGRAM";
DELETE FROM "MOMOAPI"."PROGRAM";
DELETE FROM "MOMOAPI"."LOGIN_HISTORY";
DELETE FROM "MOMOAPI"."MENU";
DELETE FROM "MOMOAPI"."ACCOUNT_ACTION_HISTORY";
DELETE FROM "MOMOAPI"."ACCOUNT";
DELETE FROM "MOMOAPI"."ROLE";
DELETE FROM "MOMOAPI"."DEPARTMENT";
COMMIT;

-- Role setup
INSERT INTO "MOMOAPI"."ROLE" (ROLE_ID, ROLE_NAME) VALUES (1, 'ADMINISTRATOR');
INSERT INTO "MOMOAPI"."ROLE" (ROLE_ID, ROLE_NAME) VALUES (2, 'RRA_OPERATOR');

-- Department setup
INSERT INTO "MOMOAPI"."DEPARTMENT" (DEPARTMENT_ID, DEPARTMENT_NAME, ENABLED, CREATE_DATE, UPDATE_DATE, BU_TAG) 
VALUES (101, 'IT Management', 'Y', SYSTIMESTAMP, SYSTIMESTAMP, 'IT');
INSERT INTO "MOMOAPI"."DEPARTMENT" (DEPARTMENT_ID, DEPARTMENT_NAME, ENABLED, CREATE_DATE, UPDATE_DATE, BU_TAG) 
VALUES (201, 'RRA Team', 'Y', SYSTIMESTAMP, SYSTIMESTAMP, 'RRA');

-- Account setup
INSERT INTO "MOMOAPI"."ACCOUNT" (ACCOUNT_ID, USER_ID, USER_NAME, EMAIL, ROLE_ID, DEPARTMENT_ID, APPROVABLE, ENABLED, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT, MOBILE) 
VALUES (1, 'twm\\admin', 'TWM Admin', 'admin@taiwanmobile.com', 1, 101, 'Y', 'Y', SYSTIMESTAMP, 1, SYSTIMESTAMP, 1, '0910000001');
INSERT INTO "MOMOAPI"."ACCOUNT" (ACCOUNT_ID, USER_ID, USER_NAME, EMAIL, ROLE_ID, DEPARTMENT_ID, APPROVABLE, ENABLED, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT, MOBILE) 
VALUES (2, 'twm\\rra_user', 'RRA Operator', 'rra.operator@taiwanmobile.com', 2, 201, 'N', 'Y', SYSTIMESTAMP, 1, SYSTIMESTAMP, 1, '0910000002');
INSERT INTO "MOMOAPI"."ACCOUNT" (ACCOUNT_ID, USER_ID, USER_NAME, EMAIL, ROLE_ID, DEPARTMENT_ID, APPROVABLE, ENABLED, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT, MOBILE) 
VALUES (3, 'twm\\inactive_user', 'Inactive User', 'inactive@taiwanmobile.com', 2, 201, 'N', 'Y', SYSTIMESTAMP, 1, SYSTIMESTAMP, 1, '0910000003');

-- Menu setup
INSERT INTO "MOMOAPI"."MENU" (MENU_ID, MENU_NAME, ORDER_NO, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT) 
VALUES (5, '權限管理', 1, SYSTIMESTAMP, 1, SYSTIMESTAMP, 1);

-- Sub-menu di bawah '權限管理' (MENU_ID = 5)
INSERT INTO "MOMOAPI"."PROGRAM" (PROGRAM_ID, MENU_ID, ORDER_NO, PROGRAM_NAME, PROGRAM_URI, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT) 
VALUES (101, 5, 1, '權限控管', '/account/rolePermission', SYSTIMESTAMP, 1, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."PROGRAM" (PROGRAM_ID, MENU_ID, ORDER_NO, PROGRAM_NAME, PROGRAM_URI, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT) 
VALUES (102, 5, 2, '帳號權限設定', '/account/accountPermission', SYSTIMESTAMP, 1, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."PROGRAM" (PROGRAM_ID, MENU_ID, ORDER_NO, PROGRAM_NAME, PROGRAM_URI, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT) 
VALUES (103, 5, 3, '新增使用者帳號', '/account/setting', SYSTIMESTAMP, 1, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."PROGRAM" (PROGRAM_ID, MENU_ID, ORDER_NO, PROGRAM_NAME, PROGRAM_URI, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT) 
VALUES (104, 5, 4, '使用者帳號列表', '/account/findAccount', SYSTIMESTAMP, 1, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."PROGRAM" (PROGRAM_ID, MENU_ID, ORDER_NO, PROGRAM_NAME, PROGRAM_URI, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT) 
VALUES (105, 5, 5, '部門列表', '/account/findDepartment', SYSTIMESTAMP, 1, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."PROGRAM" (PROGRAM_ID, MENU_ID, ORDER_NO, PROGRAM_NAME, PROGRAM_URI, CREATE_DATE, CREATE_ACCOUNT, UPDATE_DATE, UPDATE_ACCOUNT) 
VALUES (106, 5, 6, '查詢需求單', '/account/findAccountActionHistory', SYSTIMESTAMP, 1, SYSTIMESTAMP, 1);

-- Role permissions - Administrator (ROLE_ID=1) dapat akses semua program
INSERT INTO "MOMOAPI"."ROLE_PERMISSION_PROGRAM" (PERMISSION_ID, ROLE_ID, PROGRAM_ID, CREATE_DATE, CREATE_ACCOUNT) 
VALUES (1, 1, 101, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."ROLE_PERMISSION_PROGRAM" (PERMISSION_ID, ROLE_ID, PROGRAM_ID, CREATE_DATE, CREATE_ACCOUNT) 
VALUES (2, 1, 102, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."ROLE_PERMISSION_PROGRAM" (PERMISSION_ID, ROLE_ID, PROGRAM_ID, CREATE_DATE, CREATE_ACCOUNT) 
VALUES (3, 1, 103, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."ROLE_PERMISSION_PROGRAM" (PERMISSION_ID, ROLE_ID, PROGRAM_ID, CREATE_DATE, CREATE_ACCOUNT) 
VALUES (4, 1, 104, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."ROLE_PERMISSION_PROGRAM" (PERMISSION_ID, ROLE_ID, PROGRAM_ID, CREATE_DATE, CREATE_ACCOUNT) 
VALUES (5, 1, 105, SYSTIMESTAMP, 1);
INSERT INTO "MOMOAPI"."ROLE_PERMISSION_PROGRAM" (PERMISSION_ID, ROLE_ID, PROGRAM_ID, CREATE_DATE, CREATE_ACCOUNT) 
VALUES (6, 1, 106, SYSTIMESTAMP, 1);

-- Account Action History setup - Data untuk testing 查詢需求單
INSERT INTO "MOMOAPI"."ACCOUNT_ACTION_HISTORY" (ACCOUNT_ACTION_HISTORY_ID, REQUEST_ID, EXECUTE_CONTENT, ACCOUNT_ID, EXECUTE_ACCOUNT_ID, EXECUTE_DATE) 
VALUES (1, 'REQ2025080001', '設定帳號權限: 新增RRA操作員權限', 2, 1, SYSTIMESTAMP - NUMTODSINTERVAL(2, 'HOUR'));

INSERT INTO "MOMOAPI"."ACCOUNT_ACTION_HISTORY" (ACCOUNT_ACTION_HISTORY_ID, REQUEST_ID, EXECUTE_CONTENT, ACCOUNT_ID, EXECUTE_ACCOUNT_ID, EXECUTE_DATE) 
VALUES (2, 'REQ2025080002', '更新使用者角色: 從RRA_OPERATOR變更為ADMINISTRATOR', 3, 1, SYSTIMESTAMP - NUMTODSINTERVAL(1, 'DAY'));

INSERT INTO "MOMOAPI"."ACCOUNT_ACTION_HISTORY" (ACCOUNT_ACTION_HISTORY_ID, REQUEST_ID, EXECUTE_CONTENT, ACCOUNT_ID, EXECUTE_ACCOUNT_ID, EXECUTE_DATE) 
VALUES (3, 'REQ2025080003', '停用使用者帳號: 設定ENABLED為N', 3, 1, SYSTIMESTAMP - NUMTODSINTERVAL(3, 'HOUR'));

INSERT INTO "MOMOAPI"."ACCOUNT_ACTION_HISTORY" (ACCOUNT_ACTION_HISTORY_ID, REQUEST_ID, EXECUTE_CONTENT, ACCOUNT_ID, EXECUTE_ACCOUNT_ID, EXECUTE_DATE) 
VALUES (4, 'REQ2025080004', '批次更新部門設定: IT Management部門權限調整', 2, 0, SYSTIMESTAMP - NUMTODSINTERVAL(5, 'HOUR'));

INSERT INTO "MOMOAPI"."ACCOUNT_ACTION_HISTORY" (ACCOUNT_ACTION_HISTORY_ID, REQUEST_ID, EXECUTE_CONTENT, ACCOUNT_ID, EXECUTE_ACCOUNT_ID, EXECUTE_DATE) 
VALUES (5, 'REQ2025080005', '新增使用者帳號: 建立新的系統管理員帳號', 1, 1, SYSTIMESTAMP - NUMTODSINTERVAL(7, 'DAY'));

-- untuk LOGIN_HISTORY
INSERT INTO "MOMOAPI"."LOGIN_HISTORY" (LOGIN_HISTORY_ID, LOGIN_DATE, ACCOUNT_ID) 
VALUES (1, SYSTIMESTAMP - NUMTODSINTERVAL(1, 'DAY'), 1);
INSERT INTO "MOMOAPI"."LOGIN_HISTORY" (LOGIN_HISTORY_ID, LOGIN_DATE, ACCOUNT_ID) 
VALUES (2, SYSTIMESTAMP, 2);
INSERT INTO "MOMOAPI"."LOGIN_HISTORY" (LOGIN_HISTORY_ID, LOGIN_DATE, ACCOUNT_ID) 
VALUES (3, SYSTIMESTAMP - NUMTOYMINTERVAL(3, 'MONTH'), 3);